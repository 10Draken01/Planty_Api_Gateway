\documentclass[12pt,a4paper]{report}
\usepackage[spanish]{babel}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{array}
\usepackage{tabularx}
\usepackage{tcolorbox}
\usepackage{float}
\usepackage{multirow}
\usepackage{setspace}

% Configuracion de pagina
\geometry{margin=2.54cm, top=2.54cm, bottom=2.54cm}
\setstretch{1.15}

% Encabezado y pie
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{PlantGen - Suchiapas, Chiapas}
\fancyhead[R]{\thepage}
\fancyfoot[C]{\textit{Sistema Inteligente para Optimizacion de Huertos Urbanos}}
\renewcommand{\headrulewidth}{0.4pt}

% Estilos de codigo
\lstset{
    language=Python,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    breaklines=true,
    captionpos=b,
    frame=single,
    numbers=left,
    numberstyle=\tiny
}

% Titulos
\usepackage{titlesec}
\titleformat{\chapter}{\Large\bfseries}{\thechapter.}{1em}{}
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\bfseries}{\thesubsection.}{1em}{}

\title{
    \huge\textbf{PlantGen} \\
    \Large Sistema Inteligente para la Optimizacion \\
    \Large de Huertos Urbanos Personalizados \\
    \Large mediante Algoritmos Geneticos \\
    \vspace{1.5cm}
    \large Implementacion Regional: Suchiapas, Chiapas
}

\author{
    Leonardo Favio Najera Morales \\
    Matricula: 231230 \\
    \vspace{0.5cm}
    Universidad Politecnica de Chiapas \\
    Ingenieria en Tecnologias de la Informacion \\
    e Innovacion Digital \\
    \vspace{0.5cm}
    Inteligencia Artificial
}

\date{
    Suchiapas, Chiapas, Mexico \\
    \today
}

\begin{document}

\maketitle

\begin{abstract}
PlantGen es un sistema inteligente basado en Algoritmos Geneticos Multi-Objetivo para la optimizacion de configuraciones personalizadas de huertos urbanos, con contexto regional inicial en Suchiapas, Chiapas, con arquitectura escalable a otros estados de Mexico. El sistema utiliza una base de datos de 50 plantas seleccionadas para clima tropical calido, matriz de compatibilidad basada en agricultura asociativa, e implementa algoritmo genetico para optimizar simultaneamente cuatro criterios: compatibilidad entre especies, satisfaccion de rendimiento nutricional/terapeutico, eficiencia hidrica, y utilizacion de espacio. Este documento presenta la especificacion tecnica completa adaptada al contexto regional.
\end{abstract}

\tableofcontents
\newpage

\chapter{Contexto Regional: Suchiapas, Chiapas}

\section{Caracteristicas Climaticas}

Suchiapas se localiza en la region tropical de Chiapas, Mexico. Las caracteristicas climaticas principales son:

\begin{itemize}
    \item \textbf{Clasificacion de Koppen:} Af (Tropical lluvia todo el ano)
    \item \textbf{Temperatura promedio:} 25-28 grados Celsius
    \item \textbf{Precipitacion anual:} 3500-4500 mm
    \item \textbf{Humedad relativa:} 70-85\%
    \item \textbf{Temporada seca:} Minima (1-2 meses)
    \item \textbf{Estacion lluviosa:} Mayo a Octubre
\end{itemize}

\section{Implicaciones para Agricultura Urbana}

Estas condiciones climaticas implican:

\begin{enumerate}
    \item Disponibilidad de agua abundante la mayor parte del ano
    \item Necesidad de especies tolerantes a humedad alta
    \item Riesgo de enfermedades fungales en epocas lluvia
    \item Ciclos de crecimiento rapido para muchas plantas
    \item Necesidad de drenaje excelente en contenedores
    \item Luz solar moderada a abundante
\end{enumerate}

\section{Base de Plantas Adaptadas}

El sistema PlantGen para Suchiapas incluye 50 especies vegetales cuidadosamente seleccionadas por su adaptabilidad al clima tropical calido:

\begin{itemize}
    \item \textbf{14 plantas aromaticas/medicinales}: Cilantro, Epazote, Albahaca, Hierbabuena, Oregano, Tomillo, Romero, Salvia, etc.
    \item \textbf{22 plantas vegetales}: Bok Choy, Tomate Cherry, Berenjena, Amaranto, Camote, Espinaca, Rabanito, etc.
    \item \textbf{14 plantas ornamentales}: Begonia, Lantana, Zinnia, Flor de Muerto, Hibisco, etc.
\end{itemize}

\chapter{Especificacion Tecnica}

\section{Matriz de Compatibilidad}

Se ha desarrollado una matriz de compatibilidad 50x50 basada en principios de agricultura asociativa chiapaneca. Cada par de plantas tiene un valor de compatibilidad en escala [-1, 1]:

\begin{table}[H]
    \centering
    \small
    \begin{tabularx}{\textwidth}{|l|l|c|}
        \hline
        \textbf{Planta 1} & \textbf{Planta 2} & \textbf{Compatibilidad} \\
        \hline
        Cilantro & Tomate Cherry & 1.0 \\
        Cilantro & Albahaca & 1.0 \\
        Cilantro & Perejil & -0.5 \\
        Epazote & Frijol & 1.0 \\
        Albahaca & Tomate Cherry & 1.0 \\
        \hline
    \end{tabularx}
    \caption{Ejemplo de compatibilidades en matriz regional}
\end{table}

\section{Variables de Optimizacion}

\subsection{CEE: Compatibilidad Entre Especies}

\begin{equation}
\text{CEE} = \frac{\sum_{(c,v) \in \text{Pares Adyacentes}} w_{\text{dist}} \cdot C(c, v)}{\sum w_{\text{dist}} \cdot C_{\text{max}}}
\end{equation}

Donde $w_{\text{dist}} = e^{-d/\sigma}$ con $\sigma = 1.5$ metros (ajustado para huertos urbanos pequenos).

\subsection{PSRNT: Satisfaccion de Rendimiento}

\begin{equation}
\text{PSRNT} = \frac{\sum_{p \in \text{Plantas}} q_p \cdot v_p(O)}{\text{rendimiento objetivo esperado}}
\end{equation}

Donde cada planta tiene valores especificos para su clima de adaptacion (Af).

\subsection{EH: Eficiencia Hidrica}

\begin{equation}
\text{EH} = 1 - \frac{\text{Agua Total Requerida}}{\text{Agua Maxima Permitida}}
\end{equation}

Importante para Suchiapas: regulacion del drenaje en epoca lluvia, conservacion en estacion seca.

\subsection{UE: Utilizacion de Espacio}

\begin{equation}
\text{UE} = \frac{\sum_{p \in \text{Plantas}} q_p \cdot a_p}{\text{Area Total}} \leq 0.85
\end{equation}

\section{Funcion de Aptitud Global}

\begin{equation}
\text{Fitness}(I) = w_1 \cdot \text{CEE}(I) + w_2 \cdot \text{PSRNT}(I) + w_3 \cdot \text{EH}(I) + w_4 \cdot \text{UE}(I)
\end{equation}

Pesos dinamicos segun objetivo:

\begin{table}[H]
    \centering
    \small
    \begin{tabularx}{\textwidth}{|l|c|c|c|c|}
        \hline
        \textbf{Objetivo} & CEE & PSRNT & EH & UE \\
        \hline
        Alimenticio & 0.20 & 0.50 & 0.20 & 0.10 \\
        Medicinal/Aromatico & 0.25 & 0.45 & 0.15 & 0.15 \\
        Sostenible & 0.25 & 0.20 & 0.40 & 0.15 \\
        Ornamental & 0.20 & 0.40 & 0.15 & 0.25 \\
        \hline
    \end{tabularx}
    \caption{Configuraciones de peso para Suchiapas}
\end{table}

\chapter{Parametrizacion del Algoritmo Genetico}

\section{Configuracion Recomendada}

\begin{table}[H]
    \centering
    \small
    \begin{tabularx}{\textwidth}{|l|c|l|}
        \hline
        \textbf{Parametro} & \textbf{Valor} & \textbf{Justificacion} \\
        \hline
        Poblacion & 40 & Balance computo-exploracion \\
        Generaciones maximas & 150 & Suficiente para convergencia \\
        Probabilidad cruza & 0.85 & Alta reproduccion \\
        Tasa mutacion & 0.08 & 8\% de genes mutan \\
        Torneo k & 3 & Presion selectiva media \\
        Individuos elite & 3 & Preserva mejores \\
        Paciencia & 20 & Generaciones sin mejora \\
        \hline
    \end{tabularx}
    \caption{Parametros del AG para implementacion regional}
\end{table}

\section{Fases del Algoritmo}

\subsection{Fase 1: Inicializacion}

Generar 40 individuos aleatoriamente, respetando:
\begin{itemize}
    \item Disponibilidad de 50 plantas en base de datos
    \item Dimenciones de espacio urbano (1-5 m2)
    \item Restricciones de agua segun clima Af
    \item Restricciones de presupuesto local
\end{itemize}

\subsection{Fase 2: Seleccion por Torneo}

\begin{equation}
\text{TournamentSelection}(P_t, F_t, k=3)
\end{equation}

Seleccionar aleatoriamente 3 individuos, retornar el mejor. Repetir 40 veces.

\subsection{Fase 3: Cruza de Dos Puntos}

Dividir layout en 3 secciones, intercambiar seccion central entre dos padres.

\subsection{Fase 4: Mutacion por Intercambio}

Intercambiar dos plantas aleatorias en 8\% de genes promedio.

\subsection{Fase 5: Evaluacion}

Calcular fitness usando formula multi-objetivo con pesos dinamicos.

\subsection{Fase 6: Reemplazo Generacional}

Estrategia $(mu+lambda)$ con elitismo: preservar top 3, seleccionar mejores 37 de 80 combinados.

\subsection{Fase 7: Criterios de Parada}

\begin{enumerate}
    \item Alcanzar 150 generaciones
    \item Sin mejora en 20 generaciones
    \item Convergencia: varianza fitness $< 0.001$
\end{enumerate}

\chapter{Base de Datos Regional}

\section{Plantas Disponibles}

Se incluyen 50 plantas seleccionadas para Suchiapas, organizadas por categoria:

\subsection{Plantas Aromaticas/Medicinales}

Cilantro, Epazote, Albahaca, Hierbabuena, Oregano, Tomillo, Romero, Salvia, Toronjil Morado, Estafiate, Oregano Mexicano, Zacate Limon, Albahaca Morada, Oregano Cubano

\subsection{Plantas Vegetales}

Bok Choy, Tomate Cherry, Berenjena, Amaranto, Camote, Espinaca, Rabanito, Verdolaga, Pipicha, Acelga, Espinaca de Nueva Zelanda, Perejil, Hoja Santa, Papalo, Jengibre, Apio, Citronela

\subsection{Plantas Ornamentales}

Begonia, Lantana Enana, Torenia, Flor de Muerto, Zinnia, Coleо, Corazon de Jesus, Llama del Bosque, Alegria, Bromelia, Vicaria, Flor de Jamaica, Calandula

\section{Atributos por Planta}

Cada planta contiene 15 atributos:

\begin{table}[H]
    \centering
    \tiny
    \begin{tabularx}{\textwidth}{|l|l|}
        \hline
        \textbf{Atributo} & \textbf{Tipo} \\
        \hline
        ID & Entero 1-50 \\
        Nombre comun & Texto \\
        Nombre cientifico & Texto \\
        Tipo & Array: vegetable, medicinal, aromatic, ornamental \\
        Requerimiento sol & high, medium, low \\
        Riego semanal & Litros \\
        Dias cosecha & Entero \\
        Tipo suelo & Texto descriptivo \\
        Agua por kg & Litros \\
        Beneficios & Array de textos \\
        Tamaño & m2 \\
        \hline
    \end{tabularx}
    \caption{Estructura de datos para plantas}
\end{table}

\section{Ejemplo: Cilantro}

\begin{itemize}
    \item ID: 1
    \item Nombre: Cilantro
    \item Cientifico: Coriandrum sativum
    \item Tipos: aromatic, medicinal, vegetable
    \item Sol: medium
    \item Riego semanal: 11 litros
    \item Dias cosecha: 38
    \item Suelo: Suelo fertil, bien drenado, pH 6.0-7.0
    \item Agua/kg: 250 litros
    \item Beneficios: Alto en vitaminas A, C, K; Antioxidantes; Ayuda digestion
    \item Tamaño: 0.15 m2
\end{itemize}

\chapter{Restricciones Regionales}

\section{Restricciones Hard (Inviolables)}

\subsection{Espacio}

\begin{equation}
\sum_{p=1}^{50} q_p \cdot a_p \leq \text{Area disponible}
\end{equation}

Huertos urbanos tipicos en Suchiapas: 1-5 m2

\subsection{Agua}

\begin{equation}
\sum_{p=1}^{50} q_p \cdot r_p \leq \text{Agua maxima semanal}
\end{equation}

En Suchiapas: 80-200 litros/semana disponible (clima Af)

\subsection{Presupuesto}

\begin{equation}
\sum_{p=1}^{50} q_p \cdot \text{costo}_p \leq \text{Presupuesto local}
\end{equation}

Rango tipico: \$200-\$800 MXN

\subsection{Plantas Regionales}

No debe haber especies no adaptadas al clima Af. Validacion automatica contra base de datos de 50 plantas.

\section{Restricciones Soft (Penalizables)}

\begin{itemize}
    \item Preferir plantas con bajo requerimiento de agua en estacion lluvia
    \item Evitar plantas susceptibles a fungales excesivas (humedad 70-85\%)
    \item Penalizar si produccion $< 3$ kg/mes (umbral local)
\end{itemize}

\chapter{Escalabilidad a Otros Estados}

\section{Arquitectura Modular}

PlantGen esta disenado con arquitectura modular para escalabilidad:

\begin{enumerate}
    \item \textbf{Base de Datos Regional:} Reemplazar 50 plantas por especies locales
    \item \textbf{Matriz de Compatibilidad:} Adaptar segun practicas agrarias regionales
    \item \textbf{Restricciones:} Modificar agua maxima, presupuesto, clima
    \item \textbf{Pesos Dinamicos:} Ajustar segun preferencias locales
\end{enumerate}

\section{Regiones Potenciales}

\subsection{Climaticas Similares (Af - Tropical Lluvia)}

Aplicacion directa con ajustes minimos:
\begin{itemize}
    \item Tabasco
    \item Campeche
    \item Quintana Roo
    \item Yucatan
\end{itemize}

\subsection{Climaticas Moderadas (Am - Tropical Monsun)}

Adaptacion de plantas tolerantes sequias:
\begin{itemize}
    \item Oaxaca
    \item Veracruz
    \item Colima
\end{itemize}

\subsection{Climaticas Templadas (C - Templado)}

Reemplazo completo de base de plantas:
\begin{itemize}
    \item Jalisco
    \item Mexico
    \item Puebla
\end{itemize}

\chapter{Validacion de Soluciones}

Antes de retornar cualquier configuracion, se valida:

\begin{enumerate}
    \item \textbf{Botanica:} Especie en base 50 plantas + compatibilidad clima Af
    \item \textbf{Fisica:} Area ocupada $\leq$ espacio; drenaje adecuado
    \item \textbf{Tecnica:} Usuario puede mantener (experiencia); tiempo disponible
    \item \textbf{Economica:} Costo total $\leq$ presupuesto
    \item \textbf{Agricola:} Compatibilidades positivas; no conflictos
\end{enumerate}

Solo se retorna solucion si cumple TODAS las cinco validaciones.

\chapter{Ejemplo de Uso: Suchiapas}

\section{Escenario}

Usuario en Suchiapas desea huerto alimenticio, 2 m2, \$400 MXN, 90 min/semana.

\section{Entrada}

\begin{table}[H]
    \centering
    \small
    \begin{tabularx}{\textwidth}{|l|l|}
        \hline
        Objetivo & Alimenticio \\
        Clima & Af (Tropical lluvia) \\
        Area & 2 m2 \\
        Agua maxima & 150 L/semana \\
        Presupuesto & \$400 MXN \\
        Mantenimiento & 90 min/semana \\
        \hline
    \end{tabularx}
\end{table}

\section{Pesos Aplicados}

Para Alimenticio: $w_1=0.20, w_2=0.50, w_3=0.20, w_4=0.10$

\section{Mejor Solucion}

Top-3 configuraciones de huerto con:
\begin{itemize}
    \item Layout con plantas de 50 disponibles
    \item Calendario de siembra segun ciclos locales
    \item Metricas de rendimiento (CEE, PSRNT, EH, UE)
    \item Estimacion de produccion
\end{itemize}

\section{Resultados Esperados}

\begin{table}[H]
    \centering
    \small
    \begin{tabularx}{\textwidth}{|l|c|}
        \hline
        CEE (Compatibilidad) & 0.80-0.90 \\
        PSRNT (Rendimiento) & 0.85-0.95 \\
        EH (Eficiencia hidrica) & 0.70-0.80 \\
        UE (Espacio) & 0.75-0.85 \\
        Fitness & 0.80-0.90 \\
        \hline
        Produccion estimada & 8-12 kg/mes \\
        Agua utilizada & 100-140 L/semana \\
        Costo implementacion & \$350-\$390 MXN \\
        \hline
    \end{tabularx}
\end{table}

\chapter{Conclusiones}

PlantGen es un sistema escalable para optimizacion de huertos urbanos, inicialmente implementado con contexto regional de Suchiapas, Chiapas, usando 50 plantas adaptadas a clima tropical lluvioso y matriz de compatibilidad culturalmente relevante.

La arquitectura modular permite escalabilidad a otros estados mexicanos con ajustes minimos de base de plantas y parametros climaticos.

\appendix

\chapter{Glosario de Plantas}

\textbf{Cilantro:} Coriandrum sativum - Aromatica, 0.15 m2, 11 L/sem

\textbf{Epazote:} Dysphania ambrosioides - Aromatica, 0.15 m2, 9 L/sem

\textbf{Tomate Cherry:} Solanum lycopersicum - Vegetable, 0.25 m2, 20 L/sem

\textbf{Albahaca:} Ocimum basilicum - Aromatica/medicinal, 0.18 m2, 18 L/sem

\textbf{... (40 plantas adicionales)} 

\end{document}